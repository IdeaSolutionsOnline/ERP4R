% setdefault('enterprise', '')
% setdefault('loja', '')
% setdefault('atendedor', '')
% setdefault('data', '')
% setdefault('servicos', '')
% setdefault('singleservice', 'False')
% setdefault('singleatendedor', 'False')
% setdefault('clientes_atendidos', '0')
% setdefault('tempo_medio_atendimento', '00:00:00')
% setdefault('tempo_maximo_atendimento', '00:00:00')
% setdefault('tempo_minimo_atendimento', '00:00:00')
<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Relatório Atendedor</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/foundation.css" />
        <link rel="stylesheet" href="/static/css/gap.css" />
        <link rel="stylesheet" href="/static/css/gap_relatorio.css" />
    </head>
    <body>
        <div role="main">
            <div class="small-12 medium-12 columns">
                <div class="row">
                    <div class="small-12 columns">
                        <img src="../../static/logos/minfin.png" >
                        <br></br>
                    </div>
                </div>
                <div class="row">
                    <div class="small-12 columns ">
                         %loja = str(loja).split(";")
                        <h6 id="ftextoR"><b>{{enterprise}}</b></h6>
                        <h6 id="ftextoR"><b>Ilha</b>: {{loja[2]}}</h6>
                        <h6 id="ftextoR"><b>Localidade</b>: {{loja[1]}}</h6>
                    </div>
                    <hr/>
                    <h3 style="text-align: center; line-height: 10px;"><b>Relatório de Atendedor</b></h3>
                    <hr />
                </div>
                <div class="row">
                    <div class="small-6 columns">
                            % if singleatendedor == 'True':
                                %atendedor = str(atendedor).split(";")
                                <h6 id="ftextoR"><b>Nome do Atendedor</b>: {{atendedor[0]}}</h6>
                                <h6 id="ftextoR"><b>Nome de Login</b>: {{atendedor[1]}}</h6>
                                <h6 id="ftextoR"><b>Contacto:</b> {{atendedor[2]}}</h6>
                            %end
                    </div>
                    <div class="small-6 columns">
                        %data = str(data).split(";")
                        <h6 id="ftextoR"><b>Data</b>: {{data[0]}} - {{data[1]}}</h6>
                        <h6 id="ftextoR"><b>Loja </b>: {{loja[0]}}</h6>
                    </div>
                    <hr/>
                </div>
                <div class="row">
                    <div class="small-12 columns">
                        <table>
                            %if singleatendedor == 'True':
                                <thead>
                                    <tr>
                                        <th width="200">Serviços</th>
                                        <th width="200">Clientes Atendidos</th>
                                        <th width="200">Tempo Médio Atendimento</th>
                                        <th width="200">Tempo Maximo Atendimento</th>
                                        <th width="200">Tempo Minimo Atendimento</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    %if singleservice == 'False':
                                        %count = 0
                                        %atendidos = str(clientes_atendidos).split(";")
                                        %tempo_medio = str(tempo_medio_atendimento).split(";")
                                        %tempo_maximo = str(tempo_maximo_atendimento).split(";")
                                        %tempo_minimo = str(tempo_minimo_atendimento).split(";")
                                        %services= str(servicos).split(";")
                                        %for servico in services:
                                            <tr>
                                                <td>{{servico}}</td>
                                                <td>{{atendidos[count]}}</td>
                                                <td>{{tempo_medio[count]}}</td>
                                                <td>{{tempo_maximo[count]}}</td>
                                                <td>{{tempo_minimo[count]}}</td>
                                            </tr>
                                            %count+=1
                                        %end
                                    %end
                                    %if singleservice == 'True':
                                        <tr>
                                            <td>{{servicos}}</td>
                                            <td>{{clientes_atendidos}}</td>
                                            <td>{{tempo_medio_atendimento}}</td>
                                            <td>{{tempo_maximo_atendimento}}</td>
                                            <td>{{tempo_minimo_atendimento}}</td>
                                        </tr>
                                    %end
                                </tbody>
                             %end
                             % if singleatendedor == 'False':
                               <thead>
                                    <tr>
                                            <th width="50">Serviços</th>
                                            %atendedor = str(atendedor).split(";")
                                            %for atendedores in atendedor:
                                                    <th width="50">Clientes Atendidos {{atendedores}}</th>
                                                    <th width="50">Tempo Médio Atendimento {{atendedores}}</th>
                                                    <th width="50">Tempo Maximo Atendimento {{atendedores}}</th>
                                                    <th width="50">Tempo Minimo Atendimento {{atendedores}}</th>
                                            %end
                                    </tr>
                                </thead>
                                <tbody>
                                    %if singleservice == 'False':
                                        %count = 0
                                        %atendidos = str(clientes_atendidos).split(";")
                                        %tempo_medio = str(tempo_medio_atendimento).split(";")
                                        %tempo_maximo = str(tempo_maximo_atendimento).split(";")
                                        %tempo_minimo = str(tempo_minimo_atendimento).split(";")
                                                <tr>
                                                   %services= str(servicos).split(";")
                                                   %for servico in services:
                                                        <td>{{servico}}</td>
                                                        %for atendedores in atendedor:
                                                            <td>{{atendidos[count]}}</td>
                                                            <td>{{tempo_medio[count]}}</td>
                                                            <td>{{tempo_maximo[count]}}</td>
                                                            <td>{{tempo_minimo[count]}}</td>
                                                            %count+=1
                                                        %end
                                                  </tr>
                                            %end
                                    %end
                                    %if singleservice == 'True':
                                        %clientes_atendidos = str(clientes_atendidos).split(";")
                                        %tempo_medio_atendimento = str(tempo_medio_atendimento).split(";")
                                        %tempo_maximo_atendimento = str(tempo_maximo_atendimento).split(";")
                                        %tempo_minimo_atendimento = str(tempo_minimo_atendimento).split(";")
                                        %count=0
                                        <tr>
                                            <td>{{servicos}}</td>
                                                %for atendedores in atendedor:
                                                    <td>{{clientes_atendidos[count]}}</td>
                                                    <td>{{tempo_medio_atendimento[count]}}</td>
                                                    <td>{{tempo_maximo_atendimento[count]}}</td>
                                                    <td>{{tempo_minimo_atendimento[count]}}</td>
                                                     %count+=1
                                                %end
                                        </tr>
                                    %end
                                </tbody>
                             %end
                        </table>
                    </div>
                    <hr/>
                </div>
                % if singleatendedor == 'True':
                    <div class="row">
                                <div class="large-6 medium-6 small-6 columns">
                                    <h5 style="">{{text_msg}}</h5>
                                    <div style="text-align: center; width: 80%;" >
                                        <canvas id="canvas" height="550" width="400"></canvas>
                                    </div>
                                    <input class="auto-style6" name="print" value="Imprimir" onClick="javascript:window.print();window.close();" type="button">
                                </div>
                                <div class="large-6 medium-6 small-6 columns">
                                    <br><br><br><br><br><br>
                                    <h6 id="ftextoR"><b>Serviços</b>:</h6>
                                    <ul>
                                    %if singleservice == 'False':
                                        %services= str(servicos).split(";")
                                        %servicessize = len(services)
                                        %count = 0
                                        %for servico in services:
                                            <li> <a  id="service{{count}}" class="color-box"  href="#"></a><p>  {{servico}}<p></li>
                                            %count+=1
                                        %end
                                    %end
                                    %if singleservice == 'True':
                                        %servicessize = 1
                                            <li> <a  id="service0" class="color-box"  href="#"></a><p>  {{servicos}}<p></li>
                                    %end
                                </ul>
                                <input  id="servicesize" name="servicesize" value="{{servicessize}}" type="hidden">
                                </div>
                    </div>
                  %end
            </div>
        </div>
        <script src="/static/js/modernizr.js"></script>
        <script src="/static/js/jquery.min.js"></script>
        <script src="/static/js/Chart.js"></script>
        <script src="/static/js/gap_relatorio.js"></script>
        <script>
                    var atendidos = String('{{clientes_atendidos}}');
                    var singleservice = String('{{singleservice}}');
                    var singleatendedor = String('{{singleatendedor}}');
                    var servicos = String('{{servicos}}');
                    var colorContent = [];
                    var datasets = [];
                    var mylabels = "Atendidos";

                    colorContent = giveColor();
                    fillData();


                    function fillData() {
                        var color;
                        var rgbcolor;
                        if(singleatendedor == 'True'){
                            if(singleservice == 'False'){
                                atendidos = String(atendidos).split(";");
                                servicos = servicos.split(";");
                                for (var i = 0; i < atendidos.length; i++) {
                                        datasets.push({
                                           value: atendidos[i],
                                           color:colorContent[i],
                                           label: servicos[i]
                                        });
                                  };
                             }else{
                                     datasets.push({
                                           value: atendidos,
                                           color:colorContent[0],
                                           label: servicos
                                    });
                            }
                        }
                    }

                    window.onload = function () {
                        var ctx = document.getElementById("canvas").getContext("2d");
                        window.myBar = new Chart(ctx).Doughnut(datasets, { responsive: true });
                    }
        </script>
    </body>
</html>
